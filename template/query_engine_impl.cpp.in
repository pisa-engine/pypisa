#include <index_types.hpp>
#include <memory_source.hpp>

#include "@index@_query_engine.hpp"

#include "resolve_query_processor.hpp"

namespace pypisa {

@class@QueryEngine::@class@QueryEngine(std::string const& path, std::string const& wand_data_filename)
    : m_index(pisa::MemorySource::mapped_file(path)),
      m_wdata(pisa::MemorySource::mapped_file(wand_data_filename))
{}

auto @class@QueryEngine::processor(std::string_view algorithm, ScorerParams scorer_params, std::size_t k)
    -> QueryProcessor
{
    return resolve_query_processor(m_index, m_wdata, algorithm, scorer_params, k);
}

@class@QueryEngine::~@class@QueryEngine() {}

}  // namespace pypisa
